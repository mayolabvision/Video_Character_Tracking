# README for Contour Tracking Project

## Overview

This project is designed to track specific characters within video files, extracting detailed contour data that outlines the target character's body in each frame. The contours are stored in a structured table format for further analysis and visualization. The project processes video frames, identifies the target character, and saves the contour data along with relevant metadata into a master table.

## contour_table Structure

The final output of the project is a table (`contour_table`) stored in a `.mat` file called `ALL_CONTOURS.mat`. This table is composed of several columns, each holding specific information about the video, the character, and their contours. Below is an explanation of each column in the `contour_table`:

### Columns

1. **video_name**
   - **Description:** This column contains the name of the video file (without the path and file extension) from which the contour data was extracted.
   - **Type:** Categorical
   
2. **character_name**
   - **Description:** This column contains the name of the target character (e.g., "Principal") whose contours are being tracked and stored.
   - **Type:** Categorical
   
3. **time_alignedVideoStart_sec**
   - **Description:** This column contains the time points in seconds, aligned to the start of the video. Each entry corresponds to a specific frame in the video, providing a temporal context for the contours.
   - **Type:** Numeric (Double)
   
4. **contours_xy**
   - **Description:** This column contains the contour data for the target character in each frame. The contours are represented as a cell array, where each cell contains a matrix of shape (50x2). Each matrix provides the (x, y) coordinates outlining the target characterâ€™s body in that frame.
   - **Type:** Cell array of 50x2 matrices

## Explanation of Contours

The "contours" represent the (x, y) coordinates that outline the shape of the target character in each frame of the video. These contours are generated by the detection algorithm, which identifies the edges of the character's body.

For example, if the contour had only 4 points, it would simply draw a box around the character. However, to achieve a more accurate and detailed outline, we use 50 contour points. These points form a more precise boundary around the character, following the actual shape of their body as closely as possible.

## Usage

The table stored in `ALL_CONTOURS.mat` can be loaded into MATLAB or other compatible software for analysis. You can access and manipulate the contour data to study the movement, position, and other characteristics of the target character over time.

### Example MATLAB Usage:

#### 1. Load the Table and Filter by `video_name`:
```matlab
% Load the contour table from the .mat file
load('ALL_CONTOURS.mat');  

% Filter the table for a specific video name
selected_video = 'Exp_Left_FourthDoor_High';
filtered_table = contour_table(contour_table.video_name == selected_video, :);

```
% Loop through the filtered rows and plot the contours
figure;
hold on;
for i = 1:height(filtered_table)
    contour_data = filtered_table.contours_xy{i};  % Extract the (50x2) contour matrix
    plot(contour_data(:,1), contour_data(:,2), '-o');  % Plot the (x,y) coordinates
    title(sprintf('Frame: %d, Time: %.2f sec', i, filtered_table.time_alignedVideoStart_sec(i)));
    pause(0.1);  % Pause to visually inspect each contour
end
hold off;
```

```
% Define a point (e.g., eye position) to test
eye_position = [300, 200];  % Example (x, y) coordinates

% Loop through the frames and check if the point is inside the contour
inside_flags = false(height(filtered_table), 1);
for i = 1:height(filtered_table)
    contour_data = filtered_table.contours_xy{i};  % Extract the contour
    inside_flags(i) = inpolygon(eye_position(1), eye_position(2), contour_data(:,1), contour_data(:,2));
end

% Display the results
if any(inside_flags)
    disp('The eye position is inside the contour in some frames.');
else
    disp('The eye position is never inside the contour.');
end
```
